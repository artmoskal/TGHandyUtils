# TGHandyUtils üßõ‚Äç‚ôÇÔ∏èüöÄ

Are you tired of manually creating tasks in Todoist after every chat with your friends, boss, or worse... your mom? Fear not, because **TGHandyUtils** is here to save your day! With our semi-unnecessary, completely over-engineered AI-powered bot, you can finally live the hands-free life you've always dreamed of. üöÄ

## Features

- ‚úâ Listens to your Telegram messages and pretends to understand them.
- üé§ Transcribes voice messages using OpenAI Whisper.
- ü§ñ Uses advanced AI (*LangChain magic*) to convert your rambles into Todoist tasks.
- üåü Supports multiple users and pretends to care about each of them.
- ü§î Reminds you about your tasks... when it remembers to.

## How it Works

1. You chat (or forward messages, or forward and give instruction, or send voice messages).
2. The bot listens (in a totally non-creepy way).
3. For voice messages:
   - Transcribes your voice using OpenAI Whisper
   - Asks you to confirm the transcription
   - Processes the confirmed text
4. The bot thinks very, very hard.
5. The bot creates a Todoist task for you with almost the correct details.
6. You bind Todoist with [Google Calendar](https://todoist.com/help/articles/use-the-calendar-integration-rCqwLCt3G) or whatever you use

## Setup

Okay, brave soul. Ready to set this thing up? Follow these not-so-simple steps:

### Step 1: Clone the Repository
```bash
git clone https://github.com/artmoskal/TGHandyUtils.git
cd TGHandyUtils
```

### Step 2: Create Your `.env` File
You're going to need some secrets. Create a `.env` file at the root and paste in your super confidential API keys:

```
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
OPENAI_API_KEY=your_openai_api_key_here

```

You didn't forget to get those keys, did you? Here's where to find them:
- [Telegram Bot Token](https://core.telegram.org/bots/tutorial)
- [OpenAI API Key](https://help.openai.com/en/articles/4936850-where-do-i-find-my-openai-api-key) 

During your first interaction with the bot, it will ask for your Todoist API token ([get it here](https://todoist.com/help/articles/find-your-api-token-Jpzx9IIlB)). This token will be securely stored in the database for future use.

### Step 3: Deploy with Docker
It's 2024, and we all know Docker is life. Let's containerize this bad boy:

1. Build and run with Docker Compose:
   ```bash
   docker-compose -f infra/docker-compose.yml up -d
   ```

That's it! Now your bot is running in an isolated container, just as nature intended.

### Step 4: Update User Settings

During first interaction bot will ask for Todoist api key, [get it!]( https://todoist.com/help/articles/find-your-api-token-Jpzx9IIlB)

### Step 5: Install Dependencies with Conda and Run Locally (For Local Testing)
If you're testing locally and Docker isn't your thing, you can still run it the old-fashioned way:

1. Install dependencies:
   ```bash
   conda env create -f environment.yaml
   conda activate todoist-taskbot-env
   ```

2. Run the bot:
   ```bash
   python3 main.py
   ```

SQLite will create the database file automatically if it doesn't exist. Hopefully, the bot starts up without too much judgment from Python itself.

### Step 5: Pray üôè
Because software never works the first time.

## Commands

- **/drop_user_data**: Drops all your data. Because sometimes you need a fresh start, or you've finally decided that robots knowing everything about you isn't fun anymore.

## Contributing

Found a bug? Cool. You want to fix it? Even better. Make a pull request and let's talk about it like adults (or just blame it on Python).

Contact 4spamartem@gmail.com (yes, it's real email).
## License

We believe in open-source software, and we're not really in this for the money anyway. MIT License.

---

### Disclaimer üíÄ
Almost everything including this readme was generated by ChatGPT, code is not total üí© (up to me, not-quite-pro-python-guy), but could use some humanoid love.  

Scheduling mechanisms are rely on infinite cycle (possibly leaking memory with time, but I did not check). Bad, bad idea. Yet very simple.

Voice transcription might sometimes hear things that weren't said, or completely miss what you actually said. Don't use it for anything important like wedding vows or nuclear launch codes.

This bot is not guaranteed to save your life or remember the due time correctly. Use at your own peril. Don't let this bot run your entire life, or you might end up with a reminder for "buy milk" during a marriage proposal.

Enjoy responsibly! üçª

